!function o(n,h,r){function l(e,t){if(!h[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(p)return p(e,!0);throw new Error("Cannot find module '"+e+"'")}var s=h[e]={exports:{}};n[e][0].call(s.exports,function(t){var i=n[e][1][t];return l(i||t)},s,s.exports,o,n,h,r)}return h[e].exports}for(var p="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,i,e){t("./infinity-screen.config.js"),t("./infinity-screen.inertion-state.js"),t("./infinity-screen.overlay.js"),t("./infinity-screen.map.js")},{"./infinity-screen.config.js":2,"./infinity-screen.inertion-state.js":3,"./infinity-screen.map.js":4,"./infinity-screen.overlay.js":5}],2:[function(t,i,e){i.exports=function(){this.triggerMenuAttributeSelector="data-infinity-scroll",this.inertia=!0,this.axisX=!0,this.axisY=!0}},{}],3:[function(t,i,e){function s(t){this._impulseX=0,this._impulseY=0,this._screen=t,this._startX=void 0,this._startY=void 0,this._readyToUpdatePos=!0}s.prototype.updateImpulses=function(t){self._readyToUpdatePos=!1;var i=performance.now()-this._startDragTime,e=(t.clientX-this._startX)/i,s=(t.clientY-this._startY)/i;this._impulseX=50*e,this._impulseY=50*s},s.prototype.updateStartPos=function(t){var i=this;this._readyToUpdatePos&&(i._readyToUpdatePos=!1,this._startX=t.clientX,this._startY=t.clientY,this._startDragTime=performance.now(),setTimeout(function(){i._readyToUpdatePos=!0},100))},s.prototype.inertionMove=function(){if(!this._screen.isCatched){var t=this,i=this._impulseX-this._impulseX/40,e=this._impulseY-this._impulseY/40;.1<Math.abs(this._impulseX-e)&&.1<Math.abs(this._impulseY-i)&&setTimeout(function(){t._screen.moveTo(i,e),t._impulseX=i,t._impulseY=e,t.inertionMove(i,e)},16)}},i.exports=s},{}],4:[function(t,i,e){function s(t,i){this.width=void 0,this.height=void 0,this.posX=void 0,this.posY=void 0,this.elm=void 0,this._copies=[],this.config=i,this.screenElm=t,this.resizeFn=this.resizeUnbindedFn(),this.updateSizes(),this.init()}s.prototype.initListeners=function(){window.addEventListener("resize",this.resizeFn)},s.prototype.updateSizes=function(){var t=this.screenElm.getBoundingClientRect();this.width=t.width,this.height=t.height,this.posX=-t.width,this.posY=-t.height},s.prototype.resizeUnbindedFn=function(){var i=this,e=InfinityScroll.Map.toPx,s=!1;return function(t){s||(s=!0,setTimeout(function(){s=!1,i.updateSizes(),i.setState(),i._copies.forEach(function(t){t.style.width=e(i.width),t.style.height=e(i.height)})},100))}},s.prototype.setPosX=function(t){!isNaN(t)&&this.config.axisX&&(this.posX=this.posX+t,this.posX=this.posX<0?this.posX:-this.width,this.posX=0-2*this.width<this.posX?this.posX:-this.width,this.elm.style.left=InfinityScroll.Map.toPx(this.posX))},s.prototype.setPosY=function(t){!isNaN(t)&&this.config.axisY&&(this.posY=this.posY+t,this.posY=this.posY<0?this.posY:-this.height,this.posY=0-2*this.height<this.posY?this.posY:-this.height,this.elm.style.top=InfinityScroll.Map.toPx(this.posY))},s.prototype.init=function(){var t=InfinityScroll.Map.toPx,i=1;this.config.axisX&&(i*=3),this.config.axisY&&(i*=3),this.elm=document.createElement("div"),this.elm.classList.add("map"),this.elm.style["user-select"]="none";for(var e=0;e<i;e++){var s=this.screenElm.cloneNode(!0);s.style.float="left",s.style.width=t(this.width),s.style.height=t(this.height),this.elm.appendChild(s),this._copies.push(s)}this.screenElm.innerHTML="",this.screenElm.style.position="relative",this.screenElm.style.overflow="hidden",this.elm.style.position="absolute",this.setState(),this.initListeners(),this.screenElm.appendChild(this.elm)},s.prototype.setState=function(){var t=InfinityScroll.Map.toPx;this.config.axisY&&(this.elm.style.height=t(this.height*(this.config.axisY?3:1)),this.elm.style.top=t(this.posY)),this.config.axisX&&(this.elm.style.width=t(this.width*(this.config.axisX?3:1)),this.elm.style.left=t(this.posX))},s.toPx=function(t){return t+"px"},i.exports=s},{}],5:[function(t,i,e){Overlay=function(t){this._scroll=t,this.isShowed=!1,this._elm=document.createElement("div"),this._tempMousePosX=void 0,this._tempMousePosY=void 0,this._uncatchFn=this._uncatchUnbindedFn(),this._move=this._moveUnbindedFn(),this.init()},Overlay.prototype.init=function(){var t=this._elm;t.style.position="fixed",t.style["z-index"]=1e4,t.style.display="none",t.style.height="100%",t.style.width="100%",t.style.top="0",t.style.left="0",t.style.cursor="move",this.initListeners(),document.body.appendChild(t)},Overlay.prototype.initListeners=function(){this._elm.addEventListener("mouseup",this._uncatchFn)},Overlay.prototype.hide=function(){this.isShowed&&(this._elm.style.display="none",document.body.style["user-select"]=null,this.isShowed=!1)},Overlay.prototype.show=function(){this.isShowed||(this._elm.style.display="block",document.body.style["user-select"]="none",this.isShowed=!0)},Overlay.prototype._uncatchUnbindedFn=function(){var t=this;return function(){t._scroll.isCatched=!1,t._tempMousePosX=void 0,t._tempMousePosY=void 0,t.hide()}},Overlay.prototype._moveUnbindedFn=function(){var i=this;return function(t){i.isShowed&&("mousemove"===t.type&&(i._scroll.moveTo(t.clientX-i._tempMousePosX,t.clientY-i._tempMousePosY),i._tempMousePosX=t.clientX,i._tempMousePosY=t.clientY),"touchmove"===t.type&&(i._scroll.moveTo(t.touches[0].clientX-i._tempMousePosX,t.touches[0].clientY-i._tempMousePosY),i._tempMousePosX=t.touches[0].clientX,i._tempMousePosY=t.touches[0].clientY))}},i.exports=Overlay},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZmluaXR5LXNjcmVlbi5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiRXJyb3IiLCJmIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiLi9pbmZpbml0eS1zY3JlZW4uY29uZmlnLmpzIiwiLi9pbmZpbml0eS1zY3JlZW4uaW5lcnRpb24tc3RhdGUuanMiLCIuL2luZmluaXR5LXNjcmVlbi5tYXAuanMiLCIuL2luZmluaXR5LXNjcmVlbi5vdmVybGF5LmpzIiwiMiIsInRoaXMiLCJ0cmlnZ2VyTWVudUF0dHJpYnV0ZVNlbGVjdG9yIiwiaW5lcnRpYSIsImF4aXNYIiwiYXhpc1kiLCIzIiwiSW5lcnRpb25TdGF0ZSIsInNjcmVlbiIsIl9pbXB1bHNlWCIsIl9pbXB1bHNlWSIsIl9zY3JlZW4iLCJfc3RhcnRYIiwidW5kZWZpbmVkIiwiX3N0YXJ0WSIsIl9yZWFkeVRvVXBkYXRlUG9zIiwicHJvdG90eXBlIiwidXBkYXRlSW1wdWxzZXMiLCJzZWxmIiwibW92ZVRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIl9zdGFydERyYWdUaW1lIiwic3BlZWRYIiwiY2xpZW50WCIsInNwZWVkWSIsImNsaWVudFkiLCJ1cGRhdGVTdGFydFBvcyIsInNldFRpbWVvdXQiLCJpbmVydGlvbk1vdmUiLCJpc0NhdGNoZWQiLCJ0bXBJbXBYIiwidG1wSW1wWSIsIk1hdGgiLCJhYnMiLCJtb3ZlVG8iLCI0IiwiTWFwIiwic2NyZWVuRWxtIiwiY29uZmlnUmVmIiwid2lkdGgiLCJoZWlnaHQiLCJwb3NYIiwicG9zWSIsImVsbSIsIl9jb3BpZXMiLCJjb25maWciLCJyZXNpemVGbiIsInJlc2l6ZVVuYmluZGVkRm4iLCJ1cGRhdGVTaXplcyIsImluaXQiLCJpbml0TGlzdGVuZXJzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNpemVzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9QeCIsIkluZmluaXR5U2Nyb2xsIiwiaXNDaGFuZ2VkIiwic2V0U3RhdGUiLCJmb3JFYWNoIiwiY29weSIsInN0eWxlIiwic2V0UG9zWCIsIngiLCJpc05hTiIsInNldFBvc1kiLCJ5IiwibmVjZXNzYXJ5Q29waWVzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvbmVOb2RlIiwiYXBwZW5kQ2hpbGQiLCJwdXNoIiwiaW5uZXJIVE1MIiwicHgiLCI1IiwiT3ZlcmxheSIsInNjcm9sbCIsIl9zY3JvbGwiLCJpc1Nob3dlZCIsIl9lbG0iLCJfdGVtcE1vdXNlUG9zWCIsIl90ZW1wTW91c2VQb3NZIiwiX3VuY2F0Y2hGbiIsIl91bmNhdGNoVW5iaW5kZWRGbiIsIl9tb3ZlIiwiX21vdmVVbmJpbmRlZEZuIiwiZWwiLCJib2R5IiwiaGlkZSIsInNob3ciLCJ0eXBlIiwidG91Y2hlcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxTQUFTQyxFQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsSUFBSUUsRUFBa0IsbUJBQVRDLFNBQXFCQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLE1BQU0sSUFBSUssTUFBTSx1QkFBdUJMLEVBQUUsS0FBSyxJQUFJTSxFQUFFVCxFQUFFRyxJQUFJTyxZQUFZWCxFQUFFSSxHQUFHLEdBQUdRLEtBQUtGLEVBQUVDLFFBQVEsU0FBU1osR0FBRyxJQUFJRSxFQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEdBQUcsT0FBT0ksRUFBRUYsR0FBSUYsSUFBSVcsRUFBRUEsRUFBRUMsUUFBUVosRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxPQUFPRCxFQUFFRyxHQUFHTyxRQUFrRCxJQUExQyxJQUFJSCxFQUFrQixtQkFBVEQsU0FBcUJBLFFBQWdCSCxFQUFF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Q2hCNUYsS0FBS2lGLFdBQ05qRixLQUFLa0YsS0FBS3JCLE1BQWUsUUFBSSxRQUM3Qk8sU0FBU3NCLEtBQUs3QixNQUFNLGVBQWlCLE9BQ3JDN0QsS0FBS2lGLFVBQVcsSUFJeEJILFFBQVEvRCxVQUFVdUUsbUJBQXFCLFdBQ25DLElBQUlyRSxFQUFPakIsS0FDWCxPQUFPLFdBQ0hpQixFQUFLK0QsUUFBUW5ELFdBQVksRUFDekJaLEVBQUtrRSxvQkFBaUJ2RSxFQUN0QkssRUFBS21FLG9CQUFpQnhFLEVBQ3RCSyxFQUFLMEUsU0FJYmIsUUFBUS9ELFVBQVV5RSxnQkFBa0IsV0FDaEMsSUFBSXZFLEVBQU9qQixLQUNYLE9BQU8sU0FBVXRCLEdBQ1R1QyxFQUFLZ0UsV0FDVSxjQUFYdkcsRUFBRW1ILE9BQ0Y1RSxFQUFLK0QsUUFBUTlDLE9BQU94RCxFQUFFNkMsUUFBVU4sRUFBS2tFLGVBQWdCekcsRUFBRStDLFFBQVVSLEVBQUttRSxnQkFDdEVuRSxFQUFLa0UsZUFBaUJ6RyxFQUFFNkMsUUFDeEJOLEVBQUttRSxlQUFpQjFHLEVBQUUrQyxTQUViLGNBQVgvQyxFQUFFbUgsT0FDRjVFLEVBQUsrRCxRQUFROUMsT0FBT3hELEVBQUVvSCxRQUFRLEdBQUd2RSxRQUFVTixFQUFLa0UsZUFBZ0J6RyxFQUFFb0gsUUFBUSxHQUFHckUsUUFBVVIsRUFBS21FLGdCQUM1Rm5FLEVBQUtrRSxlQUFpQnpHLEVBQUVvSCxRQUFRLEdBQUd2RSxRQUNuQ04sRUFBS21FLGVBQWlCMUcsRUFBRW9ILFFBQVEsR0FBR3JFLFlBTW5EL0IsRUFBT0osUUFBVXdGLGtCQUNOIiwiZmlsZSI6ImluZmluaXR5LXNjcmVlbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgQ29uZmlnID0gcmVxdWlyZSgnLi9pbmZpbml0eS1zY3JlZW4uY29uZmlnLmpzJyksXHJcbiAgICBNYXAgPSByZXF1aXJlKCAnLi9pbmZpbml0eS1zY3JlZW4uaW5lcnRpb24tc3RhdGUuanMnICksXHJcbiAgICBPdmVybGF5ID0gcmVxdWlyZSggJy4vaW5maW5pdHktc2NyZWVuLm92ZXJsYXkuanMnICksXHJcbiAgICBJbmVydGlvblN0YXRlID0gcmVxdWlyZSAoICcuL2luZmluaXR5LXNjcmVlbi5tYXAuanMnICk7XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIEluZmluaXR5U2Nyb2xsKGVsbSwgY29uZmlnKSB7XHJcbiAgICBpZiAoZWxtKSB7XHJcbiAgICAgICAgdGhpcy5pc0NhdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24obmV3IENvbmZpZywgY29uZmlnIHx8IHt9KTtcclxuICAgICAgICB0aGlzLl9lbG0gPSB0aGlzLl9jYXRjaEVsbShlbG0pO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAodGhpcy5fZWxtLCB0aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fb3ZlcmxheSA9IG5ldyBPdmVybGF5KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2luZXJ0aW9uU3RhdGUgPSBuZXcgSW5lcnRpb25TdGF0ZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2F0Y2hGbiA9IHRoaXMuX2NhdGNoVW5iaW5kZWRGbigpO1xyXG4gICAgICAgIHRoaXMuX3VuY2F0Y2ggPSB0aGlzLl91bmNhdGNoVW5iaW5kZWRGbigpO1xyXG4gICAgICAgIHRoaXMuX21vdmUgPSB0aGlzLl9tb3ZlVW5iaW5kZWRGbigpO1xyXG5cclxuICAgICAgICB0aGlzLl90ZW1wTW91c2VQb3NYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX3RlbXBNb3VzZVBvc1kgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdExpc3RlbmVycygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUuX21vdmVVbmJpbmRlZEZuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCFzZWxmLmlzQ2F0Y2hlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5lcnRpYSkge1xyXG4gICAgICAgICAgICBzZWxmLl9pbmVydGlvblN0YXRlLnVwZGF0ZVN0YXJ0UG9zKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlbW92ZScpIHtcclxuICAgICAgICAgICAgc2VsZi5tb3ZlVG8oZS5jbGllbnRYIC0gc2VsZi5fdGVtcE1vdXNlUG9zWCwgZS5jbGllbnRZIC0gc2VsZi5fdGVtcE1vdXNlUG9zWSk7XHJcbiAgICAgICAgICAgIHNlbGYuX3RlbXBNb3VzZVBvc1ggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgIHNlbGYuX3RlbXBNb3VzZVBvc1kgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2htb3ZlJykge1xyXG4gICAgICAgICAgICBzZWxmLm1vdmVUbyhlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHNlbGYuX3RlbXBNb3VzZVBvc1gsIGUudG91Y2hlc1swXS5jbGllbnRZIC0gc2VsZi5fdGVtcE1vdXNlUG9zWSk7XHJcbiAgICAgICAgICAgIHNlbGYuX3RlbXBNb3VzZVBvc1ggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgICAgICAgc2VsZi5fdGVtcE1vdXNlUG9zWSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbkluZmluaXR5U2Nyb2xsLnByb3RvdHlwZS5fdW5jYXRjaFVuYmluZGVkRm4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBzZWxmLmlzQ2F0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIHNlbGYuX3RlbXBNb3VzZVBvc1ggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgc2VsZi5fdGVtcE1vdXNlUG9zWSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmluZXJ0aWEpIHtcclxuICAgICAgICAgICAgc2VsZi5faW5lcnRpb25TdGF0ZS51cGRhdGVJbXB1bHNlcyhlKTtcclxuICAgICAgICAgICAgc2VsZi5faW5lcnRpb25TdGF0ZS5pbmVydGlvbk1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2FkZE1vdXNlTGlzdGVuZXJzKCk7XHJcbn07XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUubW92ZVRvID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgIHRoaXMuY29uZmlnLmF4aXNYICYmIHRoaXMuX21hcC5zZXRQb3NYKHgpO1xyXG4gICAgdGhpcy5jb25maWcuYXhpc1kgJiYgdGhpcy5fbWFwLnNldFBvc1koeSk7XHJcbn07XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUuX2NhdGNoRWxtID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICB2YXIgZWxtO1xyXG4gICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBlbG0gPSBzZWxlY3RvcjtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZWxtKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyB0eXBlIG9mIGFyZ3VtZW50IFwic2VsZWN0b3JcIicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBlbG07XHJcbn07XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX21hcC5zY3JlZW5FbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fY2F0Y2hGbik7XHJcbiAgICB0aGlzLl9tYXAuc2NyZWVuRWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdmUpO1xyXG4gICAgdGhpcy5fbWFwLnNjcmVlbkVsbS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fdW5jYXRjaCk7XHJcbiAgICB0aGlzLl9tYXAuc2NyZWVuRWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9jYXRjaEZuKTtcclxufTtcclxuXHJcbkluZmluaXR5U2Nyb2xsLnByb3RvdHlwZS5fYWRkTW91c2VMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9tYXAuc2NyZWVuRWxtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2NhdGNoRm4pO1xyXG4gICAgdGhpcy5fbWFwLnNjcmVlbkVsbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3ZlKTtcclxuICAgIHRoaXMuX21hcC5zY3JlZW5FbG0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX3VuY2F0Y2gpO1xyXG4gICAgdGhpcy5fbWFwLnNjcmVlbkVsbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fY2F0Y2hGbik7XHJcbn07XHJcblxyXG5JbmZpbml0eVNjcm9sbC5wcm90b3R5cGUuX2NhdGNoVW5iaW5kZWRGbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHNlbGYuaXNDYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICBzZWxmLl9pbmVydGlvblN0YXRlLnVwZGF0ZVN0YXJ0UG9zKGUpO1xyXG4gICAgICAgIHNlbGYuX2luZXJ0aW9uU3RhdGUudXBkYXRlSW1wdWxzZXMoZSk7XHJcbiAgICB9XHJcbn07XG59LHtcIi4vaW5maW5pdHktc2NyZWVuLmNvbmZpZy5qc1wiOjIsXCIuL2luZmluaXR5LXNjcmVlbi5pbmVydGlvbi1zdGF0ZS5qc1wiOjMsXCIuL2luZmluaXR5LXNjcmVlbi5tYXAuanNcIjo0LFwiLi9pbmZpbml0eS1zY3JlZW4ub3ZlcmxheS5qc1wiOjV9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmZ1bmN0aW9uIENvbmZpZyAoKSB7XHJcbiAgICB0aGlzLnRyaWdnZXJNZW51QXR0cmlidXRlU2VsZWN0b3IgPSAnZGF0YS1pbmZpbml0eS1zY3JvbGwnO1xyXG4gICAgdGhpcy5pbmVydGlhID0gdHJ1ZTtcclxuICAgIHRoaXMuYXhpc1ggPSB0cnVlO1xyXG4gICAgdGhpcy5heGlzWSA9IHRydWU7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvbmZpZztcbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gSW5lcnRpb25TdGF0ZSAoc2NyZWVuKSB7XHJcbiAgICB0aGlzLl9pbXB1bHNlWCA9IDA7XHJcbiAgICB0aGlzLl9pbXB1bHNlWSA9IDA7XHJcbiAgICB0aGlzLl9zY3JlZW4gPSBzY3JlZW47XHJcbiAgICB0aGlzLl9zdGFydFggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl9zdGFydFkgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl9yZWFkeVRvVXBkYXRlUG9zID0gdHJ1ZTtcclxufVxyXG5cclxuSW5lcnRpb25TdGF0ZS5wcm90b3R5cGUudXBkYXRlSW1wdWxzZXMgPSBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICBzZWxmLl9yZWFkeVRvVXBkYXRlUG9zID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIG1vdmVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLl9zdGFydERyYWdUaW1lO1xyXG4gICAgICAgIHZhciBkaXN0YW5jZVggPSBlLmNsaWVudFggLSB0aGlzLl9zdGFydFg7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlWSA9IGUuY2xpZW50WSAtIHRoaXMuX3N0YXJ0WTtcclxuICAgICAgICB2YXIgc3BlZWRYID0gZGlzdGFuY2VYIC8gbW92ZVRpbWU7XHJcbiAgICAgICAgdmFyIHNwZWVkWSA9IGRpc3RhbmNlWSAvIG1vdmVUaW1lO1xyXG4gICAgICAgIHZhciBtID0gNTA7XHJcblxyXG4gICAgICAgIHRoaXMuX2ltcHVsc2VYID0gc3BlZWRYICogbTtcclxuICAgICAgICB0aGlzLl9pbXB1bHNlWSA9IHNwZWVkWSAqIG07XHJcbn07XHJcblxyXG5JbmVydGlvblN0YXRlLnByb3RvdHlwZS51cGRhdGVTdGFydFBvcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiggdGhpcy5fcmVhZHlUb1VwZGF0ZVBvcyApIHtcclxuICAgICAgICBzZWxmLl9yZWFkeVRvVXBkYXRlUG9zID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRYID0gZS5jbGllbnRYO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0WSA9IGUuY2xpZW50WTtcclxuICAgICAgICB0aGlzLl9zdGFydERyYWdUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWR5VG9VcGRhdGVQb3MgPSB0cnVlO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5JbmVydGlvblN0YXRlLnByb3RvdHlwZS5pbmVydGlvbk1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3NjcmVlbi5pc0NhdGNoZWQpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZhciB0bXBJbXBYID0gdGhpcy5faW1wdWxzZVggLSAodGhpcy5faW1wdWxzZVggLyA0MCk7XHJcbiAgICAgICAgdmFyIHRtcEltcFkgPSB0aGlzLl9pbXB1bHNlWSAtICh0aGlzLl9pbXB1bHNlWSAvIDQwKTtcclxuXHJcbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuX2ltcHVsc2VYIC0gdG1wSW1wWSkgPiAuMSAmJiBNYXRoLmFicyh0aGlzLl9pbXB1bHNlWSAtIHRtcEltcFgpID4gLjEpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zY3JlZW4ubW92ZVRvKHRtcEltcFgsIHRtcEltcFkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYuX2ltcHVsc2VYID0gdG1wSW1wWDtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2ltcHVsc2VZID0gdG1wSW1wWTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLmluZXJ0aW9uTW92ZSh0bXBJbXBYLCB0bXBJbXBZKTtcclxuICAgICAgICAgICAgfSwgMTYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5lcnRpb25TdGF0ZTtcbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gTWFwIChzY3JlZW5FbG0sIGNvbmZpZ1JlZikge1xyXG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5wb3NYID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5wb3NZID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5lbG0gPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl9jb3BpZXMgPSBbXTtcclxuICAgIHRoaXMuY29uZmlnID0gY29uZmlnUmVmO1xyXG4gICAgdGhpcy5zY3JlZW5FbG0gPSBzY3JlZW5FbG07XHJcbiAgICB0aGlzLnJlc2l6ZUZuID0gdGhpcy5yZXNpemVVbmJpbmRlZEZuKCk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVTaXplcygpO1xyXG4gICAgdGhpcy5pbml0KCk7XHJcbn1cclxuXHJcbk1hcC5wcm90b3R5cGUuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZUZuKTtcclxufTtcclxuXHJcbk1hcC5wcm90b3R5cGUudXBkYXRlU2l6ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2l6ZXMgPSB0aGlzLnNjcmVlbkVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHRoaXMud2lkdGggPSBzaXplcy53aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gc2l6ZXMuaGVpZ2h0O1xyXG4gICAgdGhpcy5wb3NYID0gLXNpemVzLndpZHRoO1xyXG4gICAgdGhpcy5wb3NZID0gLXNpemVzLmhlaWdodDtcclxufTtcclxuXHJcbk1hcC5wcm90b3R5cGUucmVzaXplVW5iaW5kZWRGbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0b1B4ID0gSW5maW5pdHlTY3JvbGwuTWFwLnRvUHg7XHJcbiAgICB2YXIgaXNDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCFpc0NoYW5nZWQpIHtcclxuICAgICAgICAgICAgaXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlU2l6ZXMoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NvcGllc1xyXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChjb3B5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuc3R5bGVbJ3dpZHRoJ10gPSB0b1B4KHNlbGYud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LnN0eWxlWydoZWlnaHQnXSA9IHRvUHgoc2VsZi5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbk1hcC5wcm90b3R5cGUuc2V0UG9zWCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICBpZiAoIWlzTmFOKHgpICYmIHRoaXMuY29uZmlnLmF4aXNYKSB7XHJcbiAgICAgICAgdGhpcy5wb3NYID0gdGhpcy5wb3NYICsgeDtcclxuICAgICAgICB0aGlzLnBvc1ggPSB0aGlzLnBvc1ggPCAwID8gdGhpcy5wb3NYIDogLXRoaXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5wb3NYID0gKDAgLSB0aGlzLndpZHRoICogMiA8IHRoaXMucG9zWCkgPyB0aGlzLnBvc1ggOiAtdGhpcy53aWR0aDtcclxuICAgICAgICB0aGlzLmVsbS5zdHlsZVsnbGVmdCddID0gSW5maW5pdHlTY3JvbGwuTWFwLnRvUHgodGhpcy5wb3NYKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1hcC5wcm90b3R5cGUuc2V0UG9zWSA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgICBpZiAoIWlzTmFOKHkpICYmIHRoaXMuY29uZmlnLmF4aXNZKSB7XHJcbiAgICAgICAgdGhpcy5wb3NZID0gdGhpcy5wb3NZICsgeTtcclxuICAgICAgICB0aGlzLnBvc1kgPSB0aGlzLnBvc1kgPCAwID8gdGhpcy5wb3NZIDogLXRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucG9zWSA9ICgwIC0gdGhpcy5oZWlnaHQgKiAyIDwgdGhpcy5wb3NZKSA/IHRoaXMucG9zWSA6IC10aGlzLmhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5lbG0uc3R5bGVbJ3RvcCddID0gSW5maW5pdHlTY3JvbGwuTWFwLnRvUHgodGhpcy5wb3NZKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1hcC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0b1B4ID0gSW5maW5pdHlTY3JvbGwuTWFwLnRvUHg7XHJcbiAgICB2YXIgbmVjZXNzYXJ5Q29waWVzID0gMTtcclxuICAgIGlmICh0aGlzLmNvbmZpZy5heGlzWCkge1xyXG4gICAgICAgIG5lY2Vzc2FyeUNvcGllcyAqPSAzO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY29uZmlnLmF4aXNZKSB7XHJcbiAgICAgICAgbmVjZXNzYXJ5Q29waWVzICo9IDM7XHJcbiAgICB9XHJcbiAgICB0aGlzLmVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5lbG0uY2xhc3NMaXN0LmFkZCgnbWFwJyk7XHJcbiAgICB0aGlzLmVsbS5zdHlsZVsndXNlci1zZWxlY3QnXSA9ICdub25lJztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5lY2Vzc2FyeUNvcGllczsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNvcHkgPSB0aGlzLnNjcmVlbkVsbS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgY29weS5zdHlsZVsnZmxvYXQnXSA9ICdsZWZ0JztcclxuICAgICAgICBjb3B5LnN0eWxlWyd3aWR0aCddID0gdG9QeCh0aGlzLndpZHRoKTtcclxuICAgICAgICBjb3B5LnN0eWxlWydoZWlnaHQnXSA9IHRvUHgodGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZWxtLmFwcGVuZENoaWxkKGNvcHkpO1xyXG4gICAgICAgIHRoaXMuX2NvcGllcy5wdXNoKGNvcHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2NyZWVuRWxtLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB0aGlzLnNjcmVlbkVsbS5zdHlsZVsncG9zaXRpb24nXSA9ICdyZWxhdGl2ZSc7XHJcbiAgICB0aGlzLnNjcmVlbkVsbS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICdoaWRkZW4nO1xyXG4gICAgdGhpcy5lbG0uc3R5bGVbJ3Bvc2l0aW9uJ10gPSAnYWJzb2x1dGUnO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgpO1xyXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnNjcmVlbkVsbS5hcHBlbmRDaGlsZCh0aGlzLmVsbSk7XHJcbn07XHJcblxyXG5NYXAucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRvUHggPSBJbmZpbml0eVNjcm9sbC5NYXAudG9QeDtcclxuICAgIGlmICh0aGlzLmNvbmZpZy5heGlzWSkge1xyXG4gICAgICAgIHRoaXMuZWxtLnN0eWxlWydoZWlnaHQnXSA9IHRvUHgodGhpcy5oZWlnaHQgKiAodGhpcy5jb25maWcuYXhpc1kgPyAzIDogMSkpO1xyXG4gICAgICAgIHRoaXMuZWxtLnN0eWxlWyd0b3AnXSA9IHRvUHgodGhpcy5wb3NZKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbmZpZy5heGlzWCkge1xyXG4gICAgICAgIHRoaXMuZWxtLnN0eWxlWyd3aWR0aCddID0gdG9QeCh0aGlzLndpZHRoICogKHRoaXMuY29uZmlnLmF4aXNYID8gMyA6IDEpKTtcclxuICAgICAgICB0aGlzLmVsbS5zdHlsZVsnbGVmdCddID0gdG9QeCh0aGlzLnBvc1gpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTWFwLnRvUHggPSBmdW5jdGlvbiAocHgpIHtcclxuICAgIHJldHVybiBweCArICdweCc7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuT3ZlcmxheSA9IGZ1bmN0aW9uIChzY3JvbGwpIHtcclxuICAgIHRoaXMuX3Njcm9sbCA9IHNjcm9sbDtcclxuICAgIHRoaXMuaXNTaG93ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2VsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5fdGVtcE1vdXNlUG9zWCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX3RlbXBNb3VzZVBvc1kgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl91bmNhdGNoRm4gPSB0aGlzLl91bmNhdGNoVW5iaW5kZWRGbigpO1xyXG4gICAgdGhpcy5fbW92ZSA9IHRoaXMuX21vdmVVbmJpbmRlZEZuKCk7XHJcbiAgICB0aGlzLmluaXQoKTtcclxufTtcclxuXHJcbk92ZXJsYXkucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZWwgPSB0aGlzLl9lbG07XHJcbiAgICBlbC5zdHlsZVsncG9zaXRpb24nXSA9ICdmaXhlZCc7XHJcbiAgICBlbC5zdHlsZVsnei1pbmRleCddID0gMTAwMDA7XHJcbiAgICBlbC5zdHlsZVsnZGlzcGxheSddID0gJ25vbmUnO1xyXG4gICAgZWwuc3R5bGVbJ2hlaWdodCddID0gJzEwMCUnO1xyXG4gICAgZWwuc3R5bGVbJ3dpZHRoJ10gPSAnMTAwJSc7XHJcbiAgICBlbC5zdHlsZVsndG9wJ10gPSAnMCc7XHJcbiAgICBlbC5zdHlsZVsnbGVmdCddID0gJzAnO1xyXG4gICAgZWwuc3R5bGVbJ2N1cnNvciddID0gJ21vdmUnO1xyXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcclxufTtcclxuXHJcbk92ZXJsYXkucHJvdG90eXBlLmluaXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZWwgPSB0aGlzLl9lbG07XHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fdW5jYXRjaEZuKTtcclxuICAgIC8vZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW92ZSk7XHJcbiAgICAvL2VsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX21vdmUpO1xyXG59O1xyXG5cclxuT3ZlcmxheS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLmlzU2hvd2VkKSB7XHJcbiAgICAgICAgdGhpcy5fZWxtLnN0eWxlWydkaXNwbGF5J10gPSAnbm9uZSc7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZVsndXNlci1zZWxlY3QnXSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuT3ZlcmxheS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghdGhpcy5pc1Nob3dlZCkge1xyXG4gICAgICAgIHRoaXMuX2VsbS5zdHlsZVsnZGlzcGxheSddID0gJ2Jsb2NrJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlWyd1c2VyLXNlbGVjdCddID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuaXNTaG93ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuT3ZlcmxheS5wcm90b3R5cGUuX3VuY2F0Y2hVbmJpbmRlZEZuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLl9zY3JvbGwuaXNDYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgc2VsZi5fdGVtcE1vdXNlUG9zWCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzZWxmLl90ZW1wTW91c2VQb3NZID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuT3ZlcmxheS5wcm90b3R5cGUuX21vdmVVbmJpbmRlZEZuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNTaG93ZWQpIHtcclxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlbW92ZScpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Njcm9sbC5tb3ZlVG8oZS5jbGllbnRYIC0gc2VsZi5fdGVtcE1vdXNlUG9zWCwgZS5jbGllbnRZIC0gc2VsZi5fdGVtcE1vdXNlUG9zWSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90ZW1wTW91c2VQb3NYID0gZS5jbGllbnRYO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGVtcE1vdXNlUG9zWSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2htb3ZlJykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fc2Nyb2xsLm1vdmVUbyhlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHNlbGYuX3RlbXBNb3VzZVBvc1gsIGUudG91Y2hlc1swXS5jbGllbnRZIC0gc2VsZi5fdGVtcE1vdXNlUG9zWSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90ZW1wTW91c2VQb3NYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90ZW1wTW91c2VQb3NZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE92ZXJsYXk7XG59LHt9XX0se30sWzFdKSJdfQ==
